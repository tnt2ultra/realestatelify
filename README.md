# RealEstate AI — Платформа для продажи недвижимости с ИИ-оценкой

Это веб-приложение, созданное на Vue 3, представляет собой платформу для покупки и продажи недвижимости. Ключевой особенностью является интегрированный "ИИ-оценщик", который позволяет пользователям быстро получить рыночную стоимость квартиры на основе её параметров.

## Технологический стек

*   **Фреймворк:** [Vue 3](https://vuejs.org/) (с использованием `<script setup>`)
*   **Сборщик:** Vite
*   **Язык:** TypeScript
*   **UI-библиотека:** Vuetify 3
*   **Управление состоянием:** Pinia
*   **Маршрутизация:** Vue Router

## Ключевые возможности

*   **Просмотр объявлений:** Пользователи могут просматривать список доступных квартир с фильтрацией по различным параметрам.
*   **ИИ-оценка стоимости:** Уникальный инструмент для быстрой оценки стоимости квартиры на основе площади, района, состояния и других факторов.
*   **Создание объявлений:** Авторизованные пользователи с типом "Продавец" могут создавать новые объявления о продаже.
*   **Аутентификация пользователей:** Реализована симуляция регистрации и входа в систему для покупателей и продавцов.
*   **Адаптивный дизайн:** Интерфейс адаптирован для использования как на десктопных, так и на мобильных устройствах.

## Структура проекта

Проект имеет логичную и масштабируемую структуру, характерную для современных Vue-приложений.

src/
  ├── assets/ # Статические ассеты (изображения, шрифты и т.д.)
  ├── components/ # Переиспользуемые UI-компоненты
  │ ├── AppNavigation.vue # Боковая навигационная панель и мобильный App Bar
  │ └── ApartmentCard.vue # Карточка для отображения одного объявления
  ├── pages/ # Компоненты-страницы, связанные с маршрутами
  │ ├── CreateListingPage.vue # Страница создания нового объявления
  │ ├── HomePage.vue # Главная (целевая) страница
  │ ├── ListingPage.vue # Страница со списком и фильтрацией объявлений
  │ ├── LoginPage.vue # Страница входа и регистрации
  │ ├── ProfilePage.vue # Страница профиля пользователя (заглушка)
  │ └── ValuationPage.vue # Страница ИИ-оценки недвижимости
  ├── stores/ # Хранилища состояния Pinia
  │ ├── apartments.ts # Логика управления объявлениями и ИИ-оценкой
  │ └── user.ts # Логика управления состоянием пользователя и аутентификацией
  ├── types/ # Определения типов TypeScript
  │ └── index.ts # Основные интерфейсы (User, Apartment и т.д.)
  ├── App.vue # Корневой компонент приложения
  └── main.ts # Точка входа в приложение (инициализация Vue, Pinia, Vuetify, Router)

## Описание файлов и логики

### 1. Хранилища состояния (Pinia)

#### `src/stores/apartments.ts`

Это центральное хранилище для всей логики, связанной с квартирами.

*   **`apartments`**: Реактивный массив (`ref`), содержащий статические данные по объявлениям. В реальном приложении эти данные загружались бы с сервера.
*   **`addApartment`**: Асинхронная функция для добавления нового объявления. Включает в себя базовую валидацию полей (длина заголовка, описания, положительные значения цены и площади). Генерирует уникальный `id` и временные метки, после чего добавляет объект в начало массива `apartments`.
*   **`getValuation`**: Ключевая функция, симулирующая работу сложного ИИ-алгоритма для оценки стоимости недвижимости.
    *   **Входные данные:** Принимает объект `ValuationRequest` с параметрами квартиры.
    *   **Валидация:** Проверяет корректность входных данных (площадь, район, этажность).
    *   **Логика расчета:**
        1.  Используется базовая цена за квадратный метр.
        2.  Применяется система множителей (`multiplier`), которые зависят от:
            *   **Района:** `districtMultipliers` содержит коэффициенты престижности для разных районов Москвы.
            *   **Состояния:** `conditionMultipliers` корректирует цену в зависимости от состояния квартиры.
            *   **Этажа:** `floorMultiplier` применяет понижающий коэффициент для первого и последнего этажей и повышающий для средних.
            *   **Площади и комнатности:** Небольшие корректировки в зависимости от общей площади и количества комнат.
        3.  Финальная стоимость рассчитывается как `basePrice * area * multiplier`.
    *   **Симуляция задержки:** `setTimeout` на 2 секунды имитирует время, необходимое для сложных вычислений.
    *   **Результат:** Возвращает `Promise<ValuationResult>`, содержащий не только оценочную стоимость, но и уровень "уверенности" алгоритма и детализацию по влияющим факторам.

### 2. Страницы (`src/pages/`)

#### `src/pages/HomePage.vue`

Целевая страница, призванная привлечь пользователя. Содержит маркетинговую информацию, описание преимуществ сервиса и ключевые кнопки для навигации ("Оценить квартиру", "Смотреть объявления").

#### `src/pages/ValuationPage.vue`

Страница с формой для ИИ-оценки.

*   **Форма:** Использует компоненты Vuetify (`v-text-field`, `v-select`) для сбора данных о квартире.
*   **Валидация:** Применяются правила валидации Vuetify (`:rules`) для обеспечения корректности вводимых данных (например, площадь от 15 до 500 м²). Реализована динамическая валидация, где этаж не может быть больше общего количества этажей.
*   **Процесс оценки:**
    1.  По нажатию на кнопку "Получить оценку ИИ" вызывается метод `handleValuation`.
    2.  Форма валидируется с помощью `form.value.validate()`.
    3.  Вызывается экшен `apartmentsStore.getValuation(formData)`.
    4.  На время выполнения оценки отображается индикатор загрузки (`v-btn :loading`).
*   **Отображение результатов:** После получения ответа от `getValuation` результаты (`result.value`) отображаются в отдельной карточке, включая отформатированную цену, уровень уверенности и круговые диаграммы, визуализирующие влияние факторов.

#### `src/pages/ListingPage.vue`

Страница для просмотра и фильтрации объявлений.

*   **Получение данных:** Напрямую использует `apartmentsStore.apartments`.
*   **Фильтрация:** Реализована через `computed` свойство, которое применяет несколько фильтров к исходному массиву квартир:
    *   Поисковая строка (фильтрует по адресу, району и заголовку).
    *   Выбор района.
    *   Количество комнат.
    *   Ценовой диапазон.
*   **Отображение:** Отфильтрованные объявления передаются в компонент `ApartmentCard` для рендеринга в виде сетки.

#### `src/pages/CreateListingPage.vue`

Страница для создания нового объявления.

*   **Предзаполнение:** В хуке `onMounted` проверяются query-параметры в URL. Если страница была открыта со страницы оценки, форма автоматически заполняется полученными данными (`area`, `rooms`, `estimatedPrice` и т.д.).
*   **Обработка изображений:** URL-адреса изображений вводятся в `v-textarea`, по одному на строку. `watch` следит за изменениями и парсит строки в массив `formData.images`, попутно валидируя URL.
*   **Отправка формы:**
    1.  Метод `handleSubmit` валидирует форму.
    2.  Проверяет, авторизован ли пользователь.
    3.  Вызывает экшен `apartmentsStore.addApartment`, передавая данные формы и информацию о продавце из `userStore`.
    4.  В случае успеха перенаправляет пользователя на страницу со списком объявлений.

#### `src/pages/LoginPage.vue`

Комбинированная страница для входа и регистрации.

*   **Переключение режимов:** Переменная `isLogin` контролирует, какая форма отображается (вход или регистрация).
*   **Валидация:** Используются стандартные правила для полей email, пароля и имени.
*   **Аутентификация:** Метод `handleSubmit` вызывает соответствующий экшен из `userStore` (`login` или `register`) и в случае успеха перенаправляет на главную страницу.

### 3. Компоненты (`src/components/`)

#### `src/components/AppNavigation.vue`

Отвечает за навигацию по приложению.

*   **Адаптивность:** Использует `useDisplay` из Vuetify для определения, является ли устройство мобильным. В зависимости от этого рендерит либо постоянную боковую панель, либо скрытую с иконкой "бургера".
*   **Динамическое меню:** `navigationItems` — это `computed` свойство, которое формирует пункты меню в зависимости от статуса аутентификации (`userStore.isAuthenticated`) и типа пользователя (`userStore.user?.userType`). Например, пункт "Создать объявление" виден только продавцам.
*   **Выход из системы:** Кнопка "Выйти" вызывает экшен `userStore.logout()` и перенаправляет на главную страницу.

#### `src/components/ApartmentCard.vue`

Компонент для отображения информации об одной квартире в списке.

*   **Пропсы:** Принимает объект `apartment` типа `Apartment`.
*   **Визуализация:**
    *   **Заголовок:** Заголовок карточки теперь имеет гибкую структуру. Длинные названия квартир аккуратно переносятся на несколько строк, а цена и состояние квартиры (например, "новое", "хорошее") сгруппированы справа, что исключает их наложение на текст.
    *   **Изображения:** Для галереи изображений используется `v-carousel`.
    *   **Основная информация:** Отображает ключевые параметры, такие как адрес, площадь, количество комнат и этажность, с использованием наглядных иконок.
    *   **Описание:** Текст описания ограничен двумя строками для сохранения единого вида карточек.
    *   **Структура:** Контент логически разделен с помощью `v-divider` на основную часть и футер с информацией о продавце и кнопками действий.

### 4. Корневой компонент

#### `src/App.vue`

Главный компонент, который служит контейнером для всего приложения.

*   **Структура:** Включает в себя `<AppNavigation />` и `<router-view />` внутри `v-main`.
*   **Инициализация:** В хуке `onMounted` вызывается `userStore.initializeAuth()`, который, вероятно, проверяет наличие токена или данных пользователя в `localStorage` для восстановления сессии при перезагрузке страницы.
*   **Глобальные стили:** Задаёт основной градиентный фон для всего приложения и базовые стили для `body`.
